
<% layout("layouts/boilerplate") %>
<head>
    <meta charset="UTF-8">
    <title>My Bookings</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  

<div class="container mt-5">
    <h1 class="mb-4">Booking Requests for Your Listings</h1>

    <% if (bookings.length === 0) { %>
        <div class="alert alert-info">
            No booking requests yet.
        </div>
    <% } else { %>
        <div class="row">
            <% bookings.forEach(booking => { %>
                <div class="col-md-6 mb-4">
                    <div class="card shadow-sm">
                        <img src="<%= booking.listing.image.url %>" class="card-img-top" alt="Listing Image">
                        <div class="card-body">
                            <h5 class="card-title"><%= booking.listing.title %></h5>
                            <p class="card-text">
                                <strong>Booked by:</strong> <%= booking.user.username %> <br>
                                <strong>Check-in:</strong> <%= booking.checkIn.toDateString() %> <br>
                                <strong>Check-out:</strong> <%= booking.checkOut.toDateString() %> <br>
                                <strong>Guests:</strong> <%= booking.guests %> <br>
                                <strong>Total Price:</strong> $<%= booking.totalPrice.toFixed(2) %>
                            </p>

                            <p>
                                <strong>Status:</strong> 
                                <% if (booking.status === "pending") { %>
                                    <span class="badge bg-warning text-dark">Pending</span>
                                <% } else if (booking.status === "confirmed") { %>
                                    <span class="badge bg-success">Confirmed</span>
                                <% } else if (booking.status === "rejected") { %>
                                    <span class="badge bg-danger">Rejected</span>
                                <% } %>
                            </p>

                            <% if (booking.status === "pending") { %>
                                <form action="/bookings/<%= booking._id %>/approve" method="POST" class="d-inline">
                                    <button class="btn btn-success btn-sm">Approve</button>
                                </form>
                                <form action="/bookings/<%= booking._id %>/reject" method="POST" class="d-inline">
                                    <button class="btn btn-danger btn-sm">Reject</button>
                                </form>
                            <% } %>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    <% } %>
</div>


  
</body>


